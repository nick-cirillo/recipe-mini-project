{% extends 'base.html' %}
{% load static %}

{% block title %}
Spark Recipes
{% endblock %}

{% block styles %}
<style>
#login {
    display:inline;
}
</style>
{% endblock %}

{% block body %}

<h1>Welcome to Spark Recipes</h1>
{% if not request.user.is_authenticated %}
<h3>Hello!</h3>
<a href="/splash"><button>Log In</button></a>
<p id="login"> to upload recipes and like posts!</p>
{% else %}
<h3>Hello, {{ user.username }}!</h3>
<a href="/logout"><button>Log Out</button></a>
{% endif %}

<div>
    <form method="POST" action="/">
        {% csrf_token %}
        <h2>Post a Recipe</h2>
        <input name="title" placeholder="Give your recipe a fun title."/>
        <input name="image" placeholder="Add a photo to highlight your recipe.">
        <input name="intro" placeholder="Tell the story of your recipe!"/>
        <input name="body" placeholder="Explain how to put together all your ingredients."/>
        <input type="submit" value="Post Recipe"/>
    </form>
</div>

{% for recipe in recipes %}
<div>
    <b>{{ recipe.author }}</b> | <i>{{ recipe.created_at }}</i>
    <h3>{{ recipe.title }}</h3>
    <img src="{{ recipe.image }}">
    <p>{{ recipe.intro }}</p>
    <p>{{ recipe.body }}</p>
    {% if user == recipe.author %}
        <a href="delete?id={{recipe.id}}">delete recipe</a>
    {% endif %}
    <p>
        <a href="like?id={{recipe.id}}">
            {% if user in recipe.likes.all %}
                unlike
            {% else %}
                like
            {% endif %}
        </a> 
    ({{ recipe.likes.count }} &hearts;)</p>
</div>
{% endfor %}

{% endblock %}